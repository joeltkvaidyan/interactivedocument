<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI PDF Assistant</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="bg-gradient"></div>

    <nav class="navbar glass">
        <div class="container nav-inner">
            <div>
                <h1 class="logo">AI PDF Assistant</h1>
                <p class="subtitle">Smart summaries & interactive chat for your documents</p>
            </div>
        </div>
    </nav>

    <main class="container main-grid">
        <!-- Left: Upload & Summary -->
        <section class="panel glass slide-up">
            <h2 class="panel-title">1. Upload PDF & Generate Summary</h2>
            <p class="panel-subtitle">
                Drop in any PDF (notes, articles, reports) and instantly get a clean summary.
            </p>

            <div class="upload-box">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-glow"></div>
                    <div class="upload-icon">üì•</div>
                    <h3>Drop your PDF here</h3>
                    <p>or click to browse from your computer</p>
                    <input type="file" id="fileInput" accept=".pdf" hidden>
                </div>

                <div id="fileName" class="file-name" style="display:none;"></div>

                <div class="summary-controls">
                    <label for="summaryMode" class="summary-label">Summary type:</label>
                    <select id="summaryMode" class="summary-select">
                        <option value="bullets">‚Ä¢ Bullet point summary</option>
                        <option value="short">üîé Short overview</option>
                        <option value="detailed">üìÑ Detailed overview</option>
                    </select>
                </div>

                <div id="loader" class="loader" style="display:none;">
                    <div class="spinner"></div>
                    <p>Analyzing your document...</p>
                </div>

                <button id="submitBtn" class="btn btn-primary" style="display:none;">
                    ‚ú® Generate Summary
                </button>

                <div id="error" class="error-message" style="display:none;"></div>
            </div>

            <div id="summarySection" class="summary-section" style="display:none;">
                <div class="summary-header">
                    <h3 id="summaryTitle" class="summary-title">Summary</h3>
                    <div class="summary-tabs">
                        <button class="tab-btn" data-mode="bullets">‚Ä¢ Bullets</button>
                        <button class="tab-btn" data-mode="short">Short</button>
                        <button class="tab-btn" data-mode="detailed">Detailed</button>
                    </div>
                </div>
                <pre id="summaryContent" class="summary-content"></pre>
            </div>
        </section>

        <!-- Right: QA Chat -->
        <section class="panel glass slide-up delay-1">
            <h2 class="panel-title">2. Chat with your PDF</h2>
            <p class="panel-subtitle">
                Ask questions like ‚ÄúWhat is the main conclusion?‚Äù or ‚ÄúList the key points of section 3‚Äù.
            </p>

            <div class="chat-box">
                <div id="chatMessages" class="chat-messages">
                    <div class="chat-message message-info">
                        <div class="message-label">Sunny</div>
                        <div class="message-text">
                            Start by uploading a PDF on the left. Then ask anything about it here.
                        </div>
                    </div>
                </div>

                <div id="qaLoader" class="loader" style="display:none;">
                    <div class="spinner"></div>
                    <p>Thinking...</p>
                </div>

                <div class="chat-input-area">
                    <input
                        type="text"
                        id="questionInput"
                        class="chat-input"
                        placeholder="Type your question and press Enter..."
                    >
                    <button id="askBtn" class="btn btn-accent">Ask</button>
                </div>

                <div id="qaError" class="error-message" style="display:none;"></div>

                <div class="chat-footer-note">
                    Answers are generated only from the uploaded document text.
                </div>
            </div>
        </section>
    </main>

    <footer class="footer glass">
        <p>AI PDF Assistant ¬∑ Built with Python & Flask</p>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
